(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(17),r=n.n(o),u=n(8),i=n(3),s=n(0),l=function(e){var t=e.newName,n=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange,o=e.handleNewContacts;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Add a new Contact"}),Object(s.jsxs)("form",{onSubmit:o,children:[Object(s.jsxs)("label",{htmlFor:"name",children:["Name:",Object(s.jsx)("input",{id:"name",value:t,onChange:n})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("label",{htmlFor:"number",children:["Number:",Object(s.jsx)("input",{id:"number",value:c,onChange:a})]}),Object(s.jsx)("button",{children:"add contact"})]})]})},b=function(e){var t=e.filterText,n=e.handleFilter;return Object(s.jsxs)("label",{htmlFor:"filter",children:["Filter shown with:",Object(s.jsx)("input",{id:"filter",value:t,onChange:n})]})},j=function(e){var t=e.person,n=e.key,c=e.removeContact;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("p",{children:[t.name," ",t.number]},n),Object(s.jsx)("button",{onClick:function(){return c(t.name,t.id)},children:"delete"})]})},d=function(e){var t=e.personsToShow,n=e.removeContact;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Numbers"}),t.map((function(e,t){return Object(s.jsx)(j,{person:e,removeContact:n},t)}))]})},h=n(4),f=n.n(h),m="/api/contacts",O=function(){return f.a.get(m).then((function(e){return e.data}))},x=function(e){return f.a.post(m,e).then((function(e){return e.data}))},p=function(e,t){return f.a.put("".concat(m,"/").concat(t),e).then((function(e){return e.data}))},w=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e}))},v=function(e){var t=e.message,n=e.notificationClass;return null===t?null:Object(s.jsx)("div",{className:n,children:t})},g=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)([]),r=Object(i.a)(o,2),j=r[0],h=r[1],f=Object(c.useState)(""),m=Object(i.a)(f,2),g=m[0],C=m[1],N=Object(c.useState)(""),S=Object(i.a)(N,2),F=S[0],k=S[1],y=Object(c.useState)(""),T=Object(i.a)(y,2),E=T[0],J=T[1],L=Object(c.useState)(null),z=Object(i.a)(L,2),A=z[0],B=z[1],D=Object(c.useState)(null),I=Object(i.a)(D,2),M=I[0],P=I[1],U=Object(c.useState)(null),Y=Object(i.a)(U,2),q=Y[0],G=Y[1],H=function(e,t){null!==M&&clearTimeout(M),B(e),G(t),P(setTimeout((function(){B(null),P(null),G(null)}),5e3)),C(""),k("")},K=0===j.length?n:j;return Object(c.useEffect)((function(){O().then((function(e){return a(e)})).catch((function(e){return console.log("fail",e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(v,{message:A,notificationClass:q}),Object(s.jsx)(b,{filterText:E,handleFilter:function(e){J(e.target.value);var t=n.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));console.log(t),h(t)}}),Object(s.jsx)(l,{newName:g,handleNameChange:function(e){return C(e.target.value)},newNumber:F,handleNumberChange:function(e){return k(e.target.value)},handleNewContacts:function(e){e.preventDefault();var t=n.find((function(e){return e.name===g}));t?window.confirm("".concat(t.name," is already on your phonebook, you want to update the old number with this new one?"))?function(e){var t=Object(u.a)(Object(u.a)({},e),{},{number:F});p(t,e.id).then((function(t){H("El contacto ".concat(t.name," ha sido actualizado")),a(n.map((function(n){return n.id!==e.id?n:t})))})).catch((function(t){H("El contacto ".concat(e.name," ya ha sido borrado"),"error"),a(n.filter((function(t){return t.id!==e.id})))}))}(t):window.alert("Update aborted"):x({name:g,number:F}).then((function(e){a(n.concat(e)),H("".concat(e.name," ha sido a\xf1adido a los contactos"),"success")})).catch((function(e){console.log(e.response.data),H(e.response.data.error,"error")}))}}),Object(s.jsx)(d,{personsToShow:K,removeContact:function(e,t){window.confirm("You want to delete ".concat(e,"?"))&&w(t).then((function(t){O().then((function(e){return a(e)})),H("".concat(e," has been deleted"),"success")}))}})]})};n(41);r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8e52c671.chunk.js.map